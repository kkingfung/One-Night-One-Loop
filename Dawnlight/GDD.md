# One Night, One Loop - Game Design Document

## Night 1 Demo Edition

**Version**: 0.1.0
**Last Updated**: 2025-01-15
**Target Platform**: Windows (PC)
**Engine**: Unreal Engine 5.7

---

## 1. コンセプト概要

### 1.1 ワンライナー
> 「監視される夜を生き延び、証拠を記録せよ」

### 1.2 デモのゴール
- **プレイ時間**: 15〜20分で完結
- **終了条件**: 夜明けの強制帰還
- **終了演出**: "Night 1 Complete – Data Incomplete"
- **設計意図**: 未完成ではなく、**設計された中断**

### 1.3 企業向けアピールポイント
- スコープ管理能力
- UE5設計理解（GAS, Enhanced Input, Subsystem）
- AIを現場的に使える判断力
- デモを"止める勇気"

---

## 2. ゲームプレイ

### 2.1 視点
**2.5D Top-Down**
- 俯瞰視点
- カメラ外の脅威を「感じさせる」演出

### 2.2 コアループ
```
拠点（準備）
    ↓
夜のエリア探索
    ↓
小規模イベント（固定3 + ランダム2）
    ↓
選択（リスク or 報酬）
    ↓
夜明け → 強制終了
```

### 2.3 テーマ: Night 1
**「監視されている」**
- 常に何かに見られている感覚
- 光と影の緊張関係
- 監視＝敵とは限らない（含みを持たせる）

---

## 3. プレイヤーアクション

### 3.1 基本アクション（3つ）

| アクション | 入力 | 説明 | リスク/リワード |
|-----------|------|------|----------------|
| **移動** | WASD / 左スティック | 光を避けて移動 | 光に入ると検知ゲージ上昇 |
| **撮影** | E / Xボタン | 証拠を記録 | 撮影中は無防備、シャッター音リスク |
| **隠れる** | Space / Aボタン | 物陰に退避 | 安全だが時間を消費 |

### 3.2 回避の三層構造

| 層 | メカニクス | 役割 |
|---|-----------|------|
| **主軸** | 光を消す/避ける | コアゲームプレイ |
| **保険** | 隠れる | フェイルセーフ |
| **スパイス** | 気配を消す | 上級者向け、タイミング系 |

### 3.3 監視メカニクス

```
光に入る → 検知ゲージ上昇
    ↓
ゲージMAX → 監視レベル上昇
    ↓
監視レベル高 → イベント難易度上昇
```

---

## 4. イベント設計

### 4.1 構成
- **固定イベント**: 3個（必ず体験）
- **ランダムイベント**: 2枠（AI Directorが選択）
- **難易度曲線**: 波状（緊張→緩和→緊張）

### 4.2 固定イベント

| # | Phase | 名称 | 英語名 | 内容 | 目的 |
|---|-------|------|--------|------|------|
| 1 | 導入 | 最初の光 | First Illumination | 入口で光と影の基本を学ぶ。監視カメラを発見（壊れている） | チュートリアル |
| 2 | 緩和 | 残された記録 | Left Behind | 前の探索者の遺留品を発見。撮影で情報取得 | 撮影練習、世界観 |
| 3 | 締め | 覚醒する監視 | System Awareness | 光が不規則に点灯。「気づかれた」感覚 | 記憶に刻む |

### 4.3 ランダムイベント候補

| 名称 | 内容 | 緊張度 | 備考 |
|------|------|--------|------|
| 巡回する光 | 一定間隔で動くスポットライト | 中 | パターン学習 |
| 反応する影 | プレイヤーの動きに反応 | 高 | ストレス要素 |
| 壊れた端末 | 撮影で一時的にエリアの光が消える | 中 | 有利イベント |
| 異音の発生源 | 音を辿ると情報、無視すると安全 | 選択型 | リスクリワード |

### 4.4 難易度曲線（Phase）

```
Phase 1（導入・低緊張）
├─ プレイヤーはルールを理解
├─ 光源は固定、予測可能
└─ 目的：安心させる

Phase 2（緩和・中緊張）
├─ 撮影の成功体験
├─ 隠れる成功体験
└─ 目的：「いけるかも」という錯覚

Phase 3（締め・再緊張）
├─ 光が不規則に点灯
├─ 撮影リスク上昇
└─ 目的：Night 1を記憶に刻む
```

---

## 5. AIシステム

### 5.1 Event Director
- 固定イベント: 人が設計
- ランダムイベント: AIが選択

```cpp
// ログ出力例
Event Director Decision: Variant B
Tension Level Shifted: Phase 2 → 3
```

### 5.2 MCP連携ポイント
- 光源配置パターン生成
- 安全/危険ゾーンの自動ラベリング
- プレイログから失敗原因ヒートマップ生成

---

## 6. 技術仕様

### 6.1 実装方針
**ハイブリッド構成**
- **C++**: コアシステム、変更頻度低い部分
- **Blueprint**: イテレーション、演出、データ

### 6.2 使用システム
| システム | 用途 |
|---------|------|
| **GAS** | アビリティ/エフェクト管理 |
| **Enhanced Input** | 入力管理（コンテキスト対応） |
| **Gameplay Tags** | 状態管理、イベントフラグ |
| **Data Assets** | イベント定義、キャラデータ |
| **Subsystems** | グローバルサービス |

### 6.3 C++で実装する領域
- Event Director（イベント選択ロジック）
- Tension/Alert管理システム
- 光・視認判定コア
- Gameplay Tags定義
- 基本データ構造（Struct / DataAsset）

### 6.4 BPで実装する領域
- イベント演出
- UI/UX
- カメラ演出
- 音響トリガー
- プロトタイプ検証

---

## 7. UI/UX

### 7.1 HUD要素（最小限）
- 検知ゲージ（画面端、控えめ）
- 時間表示（夜明けまでの残り）
- 撮影カウント

### 7.2 デモ終了演出
```
夜明けの光が差し込む
    ↓
フェードアウト
    ↓
テキスト表示:
"Night 1 Complete"
"Data Incomplete"
    ↓
スタッフクレジット or タイトルへ
```

---

## 8. マップ構成

### 8.1 Night 1 エリア
```
[入口] ─── [通路A] ─── [中央ホール] ─── [通路B] ─── [深部]
              │                              │
          [小部屋1]                      [小部屋2]
```

### 8.2 設計原則
- 全エリアを1プレイで回れない
- 選択の重みを感じさせる
- 次の夜を想像させる

---

## 9. 将来拡張（設計のみ）

### 9.1 Night 2以降
- 監視の正体が明らかに
- 新メカニクス追加
- AI Directorの判断複雑化

### 9.2 Boss案（Bプラン）
- 夜イベントの1枠を「異常反応」にしておく
- 共通仕様（カメラ、アニメ）で対応可能

---

## 10. 開発マイルストーン

### Phase 1: 基盤構築
- [ ] プロジェクト構成セットアップ
- [ ] 基本移動システム
- [ ] 光・視認判定の基礎
- [ ] Enhanced Input設定

### Phase 2: コアループ
- [ ] 撮影システム
- [ ] 隠れるシステム
- [ ] 検知ゲージ
- [ ] 固定イベント3つ

### Phase 3: 演出・調整
- [ ] ランダムイベント2枠
- [ ] 難易度曲線調整
- [ ] 夜明け演出
- [ ] UI/HUD

### Phase 4: 仕上げ
- [ ] サウンド実装
- [ ] パフォーマンス最適化
- [ ] バグ修正
- [ ] デモビルド

---

## Appendix: 用語集

| 用語 | 定義 |
|------|------|
| Night | 1つのゲームセッション単位 |
| 監視レベル | プレイヤーがどれだけ「見られているか」の指標 |
| Event Director | ランダムイベントを選択するAIシステム |
| Phase | 難易度曲線の区切り（導入/緩和/締め） |
| 検知ゲージ | 光に入った時間の蓄積 |

---

**Document Status**: Draft
**Next Review**: 実装開始後
